# Claude Code 快速参考卡

## 🎯 四大核心技能

| 技能 | 命令 | 用途 | 何时使用 |
|------|------|------|----------|
| **会话评估** | `/evaluate-session` | 评估 AI 工作质量 | 会话结束时 |
| **代码审查** | `/review [file]` | 检查代码质量 | 提交代码前 |
| **功能规划** | `/plan [功能]` | 拆解任务、评估风险 | 开发新功能前 |
| **文档管理** | `/doc [类型]` | 生成/更新文档 | 项目初始化或变更后 |

---

## 📊 性能评估框架

### 五维度评分

```
最终得分 = (
  Spec Stability × 25% +
  First-Attempt Accuracy × 25% +
  Feedback Sentiment × 20% +
  Autonomy Level × 15% +
  Completion Quality × 15%
) - 红旗扣分
```

### 快速自查

- ✅ 需求明确且稳定
- ✅ 一次做对方向
- ✅ 沟通顺畅无误解
- ✅ 主动完成少询问
- ✅ 交付质量高

### 红旗警示（扣分）

- ❌ 方向错误：-10分
- ❌ 重复错误：-15分
- ❌ 重复解释：-10分
- ❌ 忽略指令：-20分
- ❌ 大量返工：-25分

---

## 🔍 代码审查要点

### 必查项目

1. **⚠️ 正确性** - 逻辑是否正确？边界条件？
2. **🔒 安全性** - SQL注入、XSS、敏感数据？
3. **⚡ 性能** - 算法复杂度、N+1查询？
4. **🔧 可维护性** - 命名清晰？单一职责？
5. **🧪 可测试性** - 依赖注入？副作用隔离？

### 问题优先级

- 🚨 **阻断** - 必须修复（安全、语法错误）
- ⚠️ **严重** - 应尽快修复（性能、bug）
- 💡 **改进** - 建议改进（重构、优化）
- 📝 **次要** - 可选优化（格式、风格）

---

## 📋 功能规划模板

### MVP 定义

```
核心功能（必须有）:
- ✅ 功能 1
- ✅ 功能 2
- ✅ 功能 3

暂时不做（放到后续版本）:
- ⏸️ Nice-to-have 1
- ⏸️ Nice-to-have 2
```

### 任务拆解原则

**GRRAAP**:
- **G**oal-oriented - 面向目标
- **R**ealistic - 现实可行
- **R**eversible - 可逆设计
- **A**tomic - 原子化（独立可验证）
- **A**chievable - 可达成
- **P**rioritized - 有优先级

### 风险评估

| 风险 | 概率 | 影响 | 优先级 |
|------|------|------|--------|
| 技术难点 | 高 | 高 | 🔴 立即处理 |
| 时间不足 | 中 | 高 | 🟡 制定计划 |
| 依赖变更 | 低 | 低 | 🟢 监控 |

---

## 📝 文档类型清单

### 项目必需

- [ ] **README.md** - 项目门面
  - 项目简介
  - 快速开始
  - 安装步骤
  - 使用示例

- [ ] **CLAUDE.md** - AI 配置
  - 项目结构
  - 开发规范
  - 工作流程
  - 重要约定

- [ ] **CHANGELOG.md** - 变更记录
  - 版本历史
  - 新增功能
  - Bug 修复
  - 破坏性变更

### 功能开发

- [ ] **API 文档** - 接口说明
- [ ] **架构文档** - 系统设计
- [ ] **部署文档** - 运维指南

---

## 🔄 标准工作流

### 开发新功能

```
1. 规划 → /plan 功能描述
   ↓
2. 开发 → AI 辅助编码
   ↓
3. 审查 → /review 代码文件
   ↓
4. 测试 → 运行测试
   ↓
5. 文档 → /doc api
   ↓
6. 评估 → /evaluate-session
```

### 修复 Bug

```
1. 定位 → Grep/Read 查找代码
   ↓
2. 修复 → Edit 修改代码
   ↓
3. 验证 → 测试验证
   ↓
4. 评估 → /evaluate-session
```

---

## 💡 效率提升技巧

### 快速行动

- 🚀 **并行工具**: 一次调用多个独立工具
- 🎯 **精准编辑**: 用 Edit 而非重写文件
- 📋 **批量操作**: 用 && 链接相关命令
- 🔍 **主动阅读**: 先 Read 再提问

### 避免陷阱

- ❌ 不要猜测不确定的信息
- ❌ 不要过度工程化
- ❌ 不要忽略现有模式
- ❌ 不要批量标记任务完成

### 优先级判断

- 🔴 **高优先级**: 核心功能 Bug、安全漏洞、性能瓶颈
- 🟡 **中优先级**: 代码质量、重构、文档
- 🟢 **低优先级**: 边缘功能、非关键优化

---

## 🎯 持续改进

### 每次会话结束

1. 运行 `/evaluate-session`
2. 记录得分和问题
3. 识别可自动化任务
4. 更新 CLAUDE.md

### 每周回顾

1. 查看所有评估报告
2. 找出重复问题
3. 创建/更新技能
4. 优化工作流程

### 每月总结

1. 统计平均得分
2. 分析效率提升
3. 规划下一步优化
4. 分享最佳实践

---

## 📞 快速命令

```bash
# 查看所有技能
ls -la ~/.claude/skills

# 查看技能内容
cat ~/.agents/skills/evaluate-session/skill.md

# 创建新技能
mkdir -p ~/.agents/skills/my-skill
# 编辑 skill.md
ln -s ../../.agents/skills/my-skill ~/.claude/skills/my-skill

# 测试技能
# 在 Claude Code 中直接使用 /skill-name
```

---

## 🔧 故障排除

### 技能不生效

1. 检查符号链接: `ls -la ~/.claude/skills`
2. 检查文件权限: `ls -la ~/.agents/skills/`
3. 重启 Claude Code

### 评估得分低

查看评估报告中的"改进建议"部分，针对性优化

### 文档生成不满意

提供更多上下文信息，或手动编辑生成结果

---

## 📚 相关文件

- **CLAUDE.md**: `~/CLAUDE.md`
- **技能体系说明**: `~/Documents/Obsidian Vault/Claude Code 技能体系说明.md`
- **评估框架**: `~/Documents/Obsidian Vault/Claude code evaluation prompt.md`
- **技能目录**: `~/.agents/skills/`

---

**目标**: 通过系统化技能和持续改进，实现 10x 开发效率！

**记住**: 每次会话结束前运行 `/evaluate-session` 🎯
